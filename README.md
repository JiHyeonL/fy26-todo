## 요구사항
- 사용자는 ToDo를 관리할 수 있다.
  - [x] 생성 ✅
  - [x] 조회(단건/사용자별) ✅
  - 수정 -> 생성한 사용자만 가능
    - [x] 순서 변경 ✅
    - [x] 내용/마감일 변경 ✅
    - [x] 태그 추가 생성 ✅
    - [x] 태그 해제 ✅
    - [x] 완료 처리 ✅
  - 삭제 -> 생성한 사용자만 가능
    - [x] 투두 삭제 - soft delete ✅
    - [x] 태그 삭제 ✅
- [x] ToDo를 생성한 사용자를 구분할 수 있어야 함
- [x] 태그로 ToDo의 카테고리를 분류할 수 있어야 함
- [x] 생성일, 마감일, D-Day 정보를 포함해야 함
- [x] 사용자, 태그, 완료 여부를 조건으로 ToDo를 필터링할 수 있어야 함 ✅
- ToDo를 다른 사용자에게 조회만 가능한 상태로 공유할 수 있어야 함
  - [x] todo 공유 ✅
  - [x] 공유받은 투두 모두 조회 ✅
  - [ ] 특정 공유받은 투두 조회
  - [ ] 공유 해제

## 고려사항
- **현재 관리자(admin)의 ToDo 수정/삭제 권한 정책이 결정되지 않은 상황**
  - 추후 다음 중 하나로 결정될 예정:
    1. 관리자는 모든 사용자의 ToDo를 수정/삭제 가능
    2. 관리자도 본인이 생성한 ToDo만 수정/삭제 가능
- **차후에 삭제한 ToDo를 되돌리는 요구사항이 추가될 수 있음**

## 구현 조건
- REST API의 형태로 서버 구현
- 관계형 DB 사용
- ORM 사용 권장
- README 작성
---
## 추가 구현할 부분
- 테스트: ✅
- [x] 회원가입 ✅
- [x] 로그인 ✅
- [ ] 요청 dto 검증
- [ ] 도메인 제약 조건 정의(null 허용, 길이, 범위 등)
- [ ] 엔티티 필드 객체로 변경 후 그 안에 검증 로직 이동
- [ ] Lazy 로딩 시 N+1 문제 발생 가능 -> fetch join 적용 후 테스트 @Transactional 제거
- [x] 예외처리
- 태그
  - [x] Todo에 태그 생성(태그 없이 생성 요청 가능)
  - [x] 투두 조회 시 태그 같이 반환
  - [x] 태그 추가 생성
  - [x] 태그 삭제
  - [x] 태그 해제
  - [ ] 태그 로직 투두에서 적절하게 분리하기
- [ ] 투두 정렬 리팩토링
- [ ] 서비스 응답 도메인 -> dto로 변환
- [ ] 중복되는 테스트 로직 분리

## 태그
- Todo와 Tag는 다대다 관계 -> 중간 테이블 TodoTag 사용
- 한 사용자의 태그 이름은 중복 불가능(unique 제약 조건 추가) -> 필터링 효율성 증가
- 태그 생성 시 기존 태그가 있으면 재사용, 없으면 새로 생성
- 태그 필터링 할 때 member Lazy 로딩 시 N+1 문제 발생 가능 -> fetch join 사용

## Todo 정렬
- 간격 기반 인덱싱 -> Todo에 orderIndex 필드 추가
- Gap: 100_000
- 리밸런싱 기준
  - 정렬 인덱스가 앞, 뒤 Todo의 정렬 인덱스와 같아질 경우
  - 정렬 인덱스가 long 범위를 벗어날 경우

## Todo 공유
- 공유 테이블 생성
  - todo id, 공유 받은 user id를 외래키로 사용
  - unique 제약조건 추가 (todo id, 공유 받은 user id)
  - CRUD 퍼미션 필드 생각해보기

## 사용자
- 로그인, 회원가입 고려
- soft delete 적용 고려(투두, 태그 연관관계)
